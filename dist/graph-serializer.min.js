!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./Store"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("./Store");t.serializable=function(r){return void 0===r&&(r={}),function(e,t){if(1===arguments.length)o.store.get(e).setDecoration(r);else{if(3!==arguments.length)throw new Error("Invalid decorator");o.store.get(e.constructor).properties.set(t,new o.PropertyDescription(t,r))}}}}),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.serializer=function(e){return e},this.deserializer=function(e){return e}};t.Scheme=r}),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./Store"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("./Store");t.deserialize=function e(t,r){var o=new t;if(Object.getPrototypeOf(t)instanceof Function){var i=e(Object.getPrototypeOf(Object.getPrototypeOf(new t)).constructor,r);Object.keys(i).forEach(function(e){o[e]=i[e]})}return n.store.get(t).properties.forEach(function(e,t){o[t]=e.scheme.deserializer(r[e.serializedName])}),n.store.get(t).postDeserialize(o),o},t.serialize=function e(r){var o={};if(Object.getPrototypeOf(Object.getPrototypeOf(r)).constructor!==Object){var t=e(new(Object.getPrototypeOf(Object.getPrototypeOf(r)).constructor));Object.keys(t).forEach(function(e){o[e]=t[e]})}return n.store.get(r.constructor).properties.forEach(function(e,t){o[e.serializedName]=e.scheme.serializer(r[t])}),o}});var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","typescript-map","./Scheme"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("typescript-map"),o=e("./Scheme"),i=function(){function e(e,t){void 0===t&&(t={}),this.name=e,this.setDecoration(t)}return e.prototype.setDecoration=function(e){return this.scheme=void 0===e.scheme?new o.Scheme:e.scheme,this.serializedName=void 0===e.serializedName?this.name:e.serializedName,this},e}();t.PropertyDescription=i;var n=function(){function e(){this.postDeserialize=function(){},this.properties=new r.TSMap}return e.prototype.setDecoration=function(e){return void 0===e||(this.postDeserialize=void 0===e.postDeserialize?function(){}:e.postDeserialize),this},e}(),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.get=function(e){return this.has(e)||this.set(e,new n),t.prototype.get.call(this,e)},e}(r.TSMap);t.store=new s}),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./Scheme","./Serializer"],e)}(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t,o=e("./Scheme"),i=e("./Serializer");r.primitive=new o.Scheme,r.date=((t=new o.Scheme).serializer=function(e){return e instanceof Date?e.toJSON():e},t.deserializer=function(e){return"string"==typeof e?new Date(e):e},t),r.array=function(t){void 0===t&&(t=r.primitive);var e=new o.Scheme;return e.serializer=function(e){return e.map(function(e){return t.serializer(e)})},e.deserializer=function(e){return void 0===e?e:e.map(function(e){return t.deserializer(e)})},e},r.object=function(t){var e=new o.Scheme;return e.serializer=function(e){return i.serialize(e)},e.deserializer=function(e){return i.deserialize(t,e)},e},r.custom=function(e,t){var r=new o.Scheme;return r.serializer=e,r.deserializer=t,r}});